@model MusicStore.ViewMoldels.MyViewModel
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_NewLayout.cshtml";
}

<h2>个人收货信息</h2>
<form enctype="multipart/form-data" action="" method="post">
    @Html.AntiForgeryToken()

    <div>
        <fieldset>
                <div class="editor-label">
                    @Html.LabelFor(x => x.Name)
                </div>
                <div class="editor-field">
                    @Html.TextBoxFor(x => x.Name, new { placeholder = "用户名不能为空" })
                    @Html.ValidationMessageFor(x => x.Name)
                </div>

                <div class="editor-label">
                    @Html.LabelFor(x => x.Address)
                </div>
                <div class="editor-field">
                    @Html.TextBoxFor(x => x.Address, new { placeholder = "请输入地址" })
                    @Html.ValidationMessageFor(x => x.Address)
                </div>

                <div class="editor-label">
                    @Html.LabelFor(x => x.MobilNumber)
                </div>
                <div class="editor-field">
                    @Html.TextBoxFor(x => x.MobilNumber, new { placeholder = "请填写电话号码" })
                    @Html.ValidationMessageFor(x => x.MobilNumber)
                </div>

                <div class="editor-label">
                    @Html.LabelFor(x => x.Avarda)
                </div>

                <div class="editor-field">
                    <img  id="imgAvarda" src="@ViewBag.AvardaUrl"/>
                    @Html.TextBoxFor(x=>x.Avarda,new { type = "file" } )
                </div>
            <p>
                <input type="submit" value="保存" class="btn btn-success" style="width: 80px" />
            </p>
             <p></p>
        </fieldset>
    </div>
</form>

<script>
    //change 触发 预览图片
    $(function () {
        $("#Avarda").on("change",
            function () {
            var file = this.files[0];
            //判断是否是图片文件
            if (!/image\/\w+/.test(file.type)) {
                alert('文件必须为图片！！！');
                return false;
            }
            // 读文件内容
            var reader = new FileReader();
            reader.readAsDataURL(file);
            reader.onload = function (e) {
                $("#imgAvarda").attr('src', this.result)
            }
        });
    });
</script>